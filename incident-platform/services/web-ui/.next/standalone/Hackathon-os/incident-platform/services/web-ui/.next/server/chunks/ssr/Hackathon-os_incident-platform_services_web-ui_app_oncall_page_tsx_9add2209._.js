module.exports=[16502,a=>{"use strict";var b=a.i(5554),c=a.i(49410),d=a.i(31117),e=a.i(9974),f=a.i(55143),g=a.i(10715),h=a.i(15290),i=a.i(68211),j=a.i(17909),k=a.i(9552),l=a.i(63045),m=a.i(81639),n=a.i(28386),o=a.i(46479),p=a.i(10519),q=a.i(59264),r=a.i(67604),s=a.i(68973),t=a.i(56623),u=a.i(57111),v="rovingFocusGroup.onEntryFocus",w={bubbles:!1,cancelable:!0},x="RovingFocusGroup",[y,z,A]=(0,o.createCollection)(x),[B,C]=(0,n.createContextScope)(x,[A]),[D,E]=B(x),F=c.forwardRef((a,c)=>(0,b.jsx)(y.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(y.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(G,{...a,ref:c})})}));F.displayName=x;var G=c.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:e,orientation:f,loop:g=!1,dir:h,currentTabStopId:i,defaultCurrentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:l,preventScrollOnEntryFocus:n=!1,...o}=a,q=c.useRef(null),x=(0,p.useComposedRefs)(d,q),y=(0,u.useDirection)(h),[A=null,B]=(0,t.useControllableState)({prop:i,defaultProp:j,onChange:k}),[C,E]=c.useState(!1),F=(0,s.useCallbackRef)(l),G=z(e),H=c.useRef(!1),[I,J]=c.useState(0);return c.useEffect(()=>{let a=q.current;if(a)return a.addEventListener(v,F),()=>a.removeEventListener(v,F)},[F]),(0,b.jsx)(D,{scope:e,orientation:f,dir:y,loop:g,currentTabStopId:A,onItemFocus:c.useCallback(a=>B(a),[B]),onItemShiftTab:c.useCallback(()=>E(!0),[]),onFocusableItemAdd:c.useCallback(()=>J(a=>a+1),[]),onFocusableItemRemove:c.useCallback(()=>J(a=>a-1),[]),children:(0,b.jsx)(r.Primitive.div,{tabIndex:C||0===I?-1:0,"data-orientation":f,...o,ref:x,style:{outline:"none",...a.style},onMouseDown:(0,m.composeEventHandlers)(a.onMouseDown,()=>{H.current=!0}),onFocus:(0,m.composeEventHandlers)(a.onFocus,a=>{let b=!H.current;if(a.target===a.currentTarget&&b&&!C){let b=new CustomEvent(v,w);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=G().filter(a=>a.focusable);K([a.find(a=>a.active),a.find(a=>a.id===A),...a].filter(Boolean).map(a=>a.ref.current),n)}}H.current=!1}),onBlur:(0,m.composeEventHandlers)(a.onBlur,()=>E(!1))})})}),H="RovingFocusGroupItem",I=c.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:e,focusable:f=!0,active:g=!1,tabStopId:h,...i}=a,j=(0,q.useId)(),k=h||j,l=E(H,e),n=l.currentTabStopId===k,o=z(e),{onFocusableItemAdd:p,onFocusableItemRemove:s}=l;return c.useEffect(()=>{if(f)return p(),()=>s()},[f,p,s]),(0,b.jsx)(y.ItemSlot,{scope:e,id:k,focusable:f,active:g,children:(0,b.jsx)(r.Primitive.span,{tabIndex:n?0:-1,"data-orientation":l.orientation,...i,ref:d,onMouseDown:(0,m.composeEventHandlers)(a.onMouseDown,a=>{f?l.onItemFocus(k):a.preventDefault()}),onFocus:(0,m.composeEventHandlers)(a.onFocus,()=>l.onItemFocus(k)),onKeyDown:(0,m.composeEventHandlers)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void l.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return J[e]}(a,l.orientation,l.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=o().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=l.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>K(e))}})})})});I.displayName=H;var J={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var L=a.i(42411),M="Tabs",[N,O]=(0,n.createContextScope)(M,[C]),P=C(),[Q,R]=N(M),S=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,u.useDirection)(i),[m,n]=(0,t.useControllableState)({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(Q,{scope:d,baseId:(0,q.useId)(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(r.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});S.displayName=M;var T="TabsList",U=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=R(T,d),h=P(d);return(0,b.jsx)(F,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(r.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});U.displayName=T;var V="TabsTrigger",W=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=R(V,d),i=P(d),j=Z(h.baseId,e),k=$(h.baseId,e),l=e===h.value;return(0,b.jsx)(I,{asChild:!0,...i,focusable:!f,active:l,children:(0,b.jsx)(r.Primitive.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":k,"data-state":l?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:(0,m.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,m.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,m.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;l||f||!a||h.onValueChange(e)})})})});W.displayName=V;var X="TabsContent",Y=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=R(X,e),k=Z(j.baseId,f),l=$(j.baseId,f),m=f===j.value,n=c.useRef(m);return c.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(L.Presence,{present:g||m,children:({present:c})=>(0,b.jsx)(r.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:n.current?"0s":void 0},children:c&&h})})});function Z(a,b){return`${a}-trigger-${b}`}function $(a,b){return`${a}-content-${b}`}Y.displayName=X;var _=a.i(54868);let aa=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(U,{ref:d,className:(0,_.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...c}));aa.displayName=U.displayName;let ab=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(W,{ref:d,className:(0,_.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...c}));ab.displayName=W.displayName;let ac=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Y,{ref:d,className:(0,_.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...c}));ac.displayName=Y.displayName;var ad=a.i(39138),ae=a.i(50885);let af=(0,ae.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var ag=a.i(3088);let ah=(0,ae.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var ai=a.i(14380);let aj=(0,ae.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var ak=a.i(28303),al=a.i(65215);let am=(0,ae.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),an=(0,ae.default)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var ao=a.i(61124),ap=a.i(37845);function aq(){let{data:a,error:c,isLoading:e}=(0,d.default)("/api/v1/schedules",f.fetcher,{refreshInterval:3e4}),{data:g}=(0,d.default)("/api/v1/escalations",f.fetcher,{refreshInterval:3e4}),h=a?.map(a=>a.team)??[];return(0,b.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"On-Call"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"Manage rotations, overrides, and escalations"})]}),(0,b.jsx)(at,{})]}),c&&(0,b.jsx)("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-sm text-destructive",children:"Failed to load schedules. Make sure the API Gateway and On-Call Service are running."}),e&&(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(ak.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading schedules..."})]}),a&&(0,b.jsxs)(S,{defaultValue:"current",className:"w-full",children:[(0,b.jsxs)(aa,{children:[(0,b.jsx)(ab,{value:"current",children:"Currently On-Call"}),(0,b.jsxs)(ab,{value:"schedules",children:["Schedules (",a.length,")"]}),(0,b.jsxs)(ab,{value:"escalations",children:["Escalations (",g?.length??0,")"]})]}),(0,b.jsx)(ac,{value:"current",className:"mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[h.map(a=>(0,b.jsx)(ar,{team:a},a)),0===h.length&&(0,b.jsx)("p",{className:"col-span-full py-12 text-center text-muted-foreground",children:"No schedules yet. Create one to get started."})]})}),(0,b.jsxs)(ac,{value:"schedules",className:"mt-4 flex flex-col gap-4",children:[a.map(a=>(0,b.jsx)(as,{schedule:a},a.team)),0===a.length&&(0,b.jsx)("p",{className:"py-12 text-center text-muted-foreground",children:"No schedules configured yet."})]}),(0,b.jsx)(ac,{value:"escalations",className:"mt-4",children:(0,b.jsx)(au,{escalations:g??[]})})]})]})}function ar({team:a}){let{data:l,isLoading:m}=(0,d.default)("/api/v1/oncall/current?team="+encodeURIComponent(a),f.fetcher,{refreshInterval:3e4}),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)("");async function D(){if(p.trim()&&r.trim()){w(!0);try{await (0,f.setOverride)({team:a,user_name:p.trim(),user_email:r.trim(),reason:t.trim()||void 0}),(0,e.mutate)("/api/v1/oncall/current?team="+encodeURIComponent(a)),o(!1),q(""),s(""),u("")}catch(a){console.error("Override failed:",a)}finally{w(!1)}}}async function E(){w(!0);try{await (0,f.removeOverride)(a),(0,e.mutate)("/api/v1/oncall/current?team="+encodeURIComponent(a))}catch(a){console.error("Remove override failed:",a)}finally{w(!1)}}async function F(){if(z.trim()){w(!0);try{await (0,f.triggerEscalation)({team:a,incident_id:z.trim(),reason:B.trim()||void 0}),(0,e.mutate)("/api/v1/escalations"),y(!1),A(""),C("")}catch(a){console.error("Escalation failed:",a)}finally{w(!1)}}}return m?(0,b.jsx)(g.Card,{className:"border-border bg-card",children:(0,b.jsx)(g.CardContent,{className:"flex items-center justify-center py-8",children:(0,b.jsx)(ak.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"})})}):l?(0,b.jsxs)(g.Card,{className:"border-border bg-card",children:[(0,b.jsx)(g.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-foreground",children:a.replace(/-/g," ").replace(/\b\w/g,a=>a.toUpperCase())}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsxs)(k.Dialog,{open:n,onOpenChange:o,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Set override",children:(0,b.jsx)(an,{className:"h-3.5 w-3.5"})})}),(0,b.jsxs)(k.DialogContent,{children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Set On-Call Override"}),(0,b.jsxs)(k.DialogDescription,{children:["Temporarily replace the primary on-call for ",a,"."]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 py-2",children:[(0,b.jsx)(j.Input,{placeholder:"Name",value:p,onChange:a=>q(a.target.value)}),(0,b.jsx)(j.Input,{placeholder:"Email",value:r,onChange:a=>s(a.target.value)}),(0,b.jsx)(j.Input,{placeholder:"Reason (optional)",value:t,onChange:a=>u(a.target.value)})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:D,disabled:v,children:"Apply Override"})]})]})]}),(0,b.jsxs)(k.Dialog,{open:x,onOpenChange:y,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Escalate",children:(0,b.jsx)(ao.AlertTriangle,{className:"h-3.5 w-3.5"})})}),(0,b.jsxs)(k.DialogContent,{children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Trigger Escalation"}),(0,b.jsxs)(k.DialogDescription,{children:["Escalate an incident to the next responder on ",a,"."]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 py-2",children:[(0,b.jsx)(j.Input,{placeholder:"Incident ID",value:z,onChange:a=>A(a.target.value)}),(0,b.jsx)(j.Input,{placeholder:"Reason (optional)",value:B,onChange:a=>C(a.target.value)})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,b.jsx)(i.Button,{variant:"destructive",onClick:F,disabled:v||!z.trim(),children:"Escalate"})]})]})]})]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-primary/20 bg-primary/5 p-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary/10",children:(0,b.jsx)(aj,{className:"h-4 w-4 text-primary"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("span",{className:"text-xs font-medium uppercase tracking-wider text-primary",children:["Primary",l.primary.override&&(0,b.jsx)(h.Badge,{variant:"outline",className:"ml-2 text-[10px] text-yellow-600 dark:text-yellow-400",children:"Override"})]}),(0,b.jsx)("span",{className:"text-sm font-medium text-foreground",children:l.primary.name}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:l.primary.email}),l.primary.reason&&(0,b.jsx)("span",{className:"mt-0.5 text-xs italic text-muted-foreground",children:l.primary.reason})]}),(0,b.jsxs)("div",{className:"ml-auto flex flex-col items-end gap-1",children:[(0,b.jsx)(af,{className:"h-4 w-4 text-muted-foreground"}),l.primary.override&&(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive",title:"Remove override",onClick:E,disabled:v,children:(0,b.jsx)(ap.X,{className:"h-3 w-3"})})]})]}),l.secondary&&(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-secondary/50 p-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-secondary",children:(0,b.jsx)(ag.User,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:"Secondary"}),(0,b.jsx)("span",{className:"text-sm font-medium text-foreground",children:l.secondary.name}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:l.secondary.email})]})]})]})})]}):null}function as({schedule:a}){let[d,j]=(0,c.useState)(!1);async function k(){if(confirm("Delete schedule for "+a.team+"?")){j(!0);try{await (0,f.deleteSchedule)(a.team),(0,e.mutate)("/api/v1/schedules")}catch(a){console.error("Delete failed:",a)}finally{j(!1)}}}return(0,b.jsxs)(g.Card,{className:"border-border bg-card",children:[(0,b.jsx)(g.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-secondary",children:(0,b.jsx)(ah,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-foreground",children:a.team.replace(/-/g," ").replace(/\b\w/g,a=>a.toUpperCase())}),(0,b.jsxs)("p",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,b.jsx)(ai.Calendar,{className:"h-3 w-3"}),a.rotation_type," rotation"]})]}),(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:k,disabled:d,title:"Delete schedule",children:(0,b.jsx)(am,{className:"h-4 w-4"})})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:a.members.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-secondary/30 px-3 py-2.5",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-secondary text-xs font-medium text-foreground",children:a.name.split(" ").map(a=>a[0]).join("")}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm text-foreground",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.email})]}),(0,b.jsx)(h.Badge,{variant:"outline",className:"primary"===a.role?"ml-auto text-primary":"ml-auto text-muted-foreground",children:a.role})]},a.email))})})]})}function at(){let[a,d]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)("weekly"),[q,r]=(0,c.useState)([{name:"",email:"",role:"primary"},{name:"",email:"",role:"secondary"}]);function s(a,b,c){r(d=>d.map((d,e)=>e===a?{...d,[b]:c}:d))}async function t(){let a=q.filter(a=>a.name.trim()&&a.email.trim());if(m.trim()&&0!==a.length){h(!0);try{await (0,f.createSchedule)({team:m.trim(),rotation_type:o,members:a.map(a=>({name:a.name.trim(),email:a.email.trim(),role:a.role}))}),(0,e.mutate)("/api/v1/schedules"),d(!1),n(""),p("weekly"),r([{name:"",email:"",role:"primary"},{name:"",email:"",role:"secondary"}])}catch(a){console.error("Create schedule failed:",a)}finally{h(!1)}}}return(0,b.jsxs)(k.Dialog,{open:a,onOpenChange:d,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{className:"gap-1.5",children:[(0,b.jsx)(al.Plus,{className:"h-4 w-4"}),"New Schedule"]})}),(0,b.jsxs)(k.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Create On-Call Schedule"}),(0,b.jsx)(k.DialogDescription,{children:"Set up a new rotation for a team."})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 py-2",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Team Name"}),(0,b.jsx)(j.Input,{placeholder:"e.g. platform-team",value:m,onChange:a=>n(a.target.value)})]}),(0,b.jsxs)("div",{className:"w-40",children:[(0,b.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Rotation"}),(0,b.jsxs)(l.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"daily",children:"Daily"}),(0,b.jsx)(l.SelectItem,{value:"weekly",children:"Weekly"}),(0,b.jsx)(l.SelectItem,{value:"biweekly",children:"Biweekly"})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"Members"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[q.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Input,{placeholder:"Name",value:a.name,onChange:a=>s(c,"name",a.target.value),className:"flex-1"}),(0,b.jsx)(j.Input,{placeholder:"Email",value:a.email,onChange:a=>s(c,"email",a.target.value),className:"flex-1"}),(0,b.jsxs)(l.Select,{value:a.role,onValueChange:a=>s(c,"role",a),children:[(0,b.jsx)(l.SelectTrigger,{className:"w-28",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"primary",children:"Primary"}),(0,b.jsx)(l.SelectItem,{value:"secondary",children:"Secondary"})]})]}),q.length>1&&(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 text-destructive",onClick:()=>{r(a=>a.filter((a,b)=>b!==c))},children:(0,b.jsx)(ap.X,{className:"h-3.5 w-3.5"})})]},c)),(0,b.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:function(){r(a=>[...a,{name:"",email:"",role:"secondary"}])},className:"mt-1 w-fit gap-1",children:[(0,b.jsx)(al.Plus,{className:"h-3.5 w-3.5"}),"Add Member"]})]})]})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:t,disabled:g||!m.trim(),children:"Create Schedule"})]})]})]})}function au({escalations:a}){return 0===a.length?(0,b.jsx)("p",{className:"py-12 text-center text-muted-foreground",children:"No escalations recorded yet."}):(0,b.jsx)("div",{className:"rounded-xl border border-border bg-card",children:(0,b.jsxs)(ad.Table,{children:[(0,b.jsx)(ad.TableHeader,{children:(0,b.jsxs)(ad.TableRow,{className:"border-border hover:bg-transparent",children:[(0,b.jsx)(ad.TableHead,{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:"Team"}),(0,b.jsx)(ad.TableHead,{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:"Incident"}),(0,b.jsx)(ad.TableHead,{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:"Escalated To"}),(0,b.jsx)(ad.TableHead,{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:"Reason"}),(0,b.jsx)(ad.TableHead,{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:"When"})]})}),(0,b.jsx)(ad.TableBody,{children:a.map(a=>(0,b.jsxs)(ad.TableRow,{className:"border-border hover:bg-secondary/50",children:[(0,b.jsx)(ad.TableCell,{className:"text-sm font-medium text-foreground",children:a.team}),(0,b.jsx)(ad.TableCell,{className:"font-mono text-xs text-muted-foreground",children:a.incident_id.slice(0,8)}),(0,b.jsx)(ad.TableCell,{className:"text-sm text-foreground",children:a.escalated_to?a.escalated_to.name:"—"}),(0,b.jsx)(ad.TableCell,{className:"max-w-[200px] truncate text-sm text-muted-foreground",children:a.reason||"—"}),(0,b.jsx)(ad.TableCell,{className:"text-sm text-muted-foreground",children:function(a){let b=new Date,c=new Date(a),d=Math.floor((b.getTime()-c.getTime())/6e4);if(d<60)return d+"m ago";let e=Math.floor(d/60);return e<24?e+"h ago":Math.floor(e/24)+"d ago"}(a.timestamp)})]},a.escalation_id))})]})})}a.s(["default",()=>aq],16502)}];

//# sourceMappingURL=Hackathon-os_incident-platform_services_web-ui_app_oncall_page_tsx_9add2209._.js.map